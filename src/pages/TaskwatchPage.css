/* Taskwatch: Snap Back card + panel */

.snapback-tool {
  width: 100%;
  max-width: min(720px, 100%);
  display: flex;
  justify-content: center;
}

.snapback-tool__card {
  width: 100%;
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: clamp(0.9rem, 2.6vw, 1.4rem);
  padding: clamp(0.9rem, 2.6vw, 1.4rem) clamp(1.1rem, 3vw, 1.8rem);
  border-radius: clamp(14px, 3.2vw, 20px);
  border: 1px solid rgba(108, 134, 255, 0.35);
  background: linear-gradient(155deg, rgba(40, 52, 120, 0.92) 0%, rgba(24, 32, 78, 0.94) 60%, rgba(12, 18, 44, 0.96) 100%);
  box-shadow: 0 24px 52px -28px rgba(4, 10, 32, 0.8), inset 0 0 0 1px rgba(255, 255, 255, 0.05);
}

.snapback-tool__body {
  display: flex;
  flex-direction: column;
  gap: clamp(0.35rem, 1.2vw, 0.6rem);
  max-width: 70%;
}

.snapback-tool__title {
  margin: 0;
  font-family: var(--font-display);
  font-size: clamp(1.1rem, 2.8vw, 1.45rem);
  font-weight: 600;
  letter-spacing: 0.04em;
  text-transform: uppercase;
  color: rgba(226, 230, 255, 0.92);
}

.snapback-tool__text {
  margin: 0;
  color: rgba(206, 212, 255, 0.75);
  font-size: clamp(0.85rem, 2vw, 0.98rem);
  line-height: 1.55;
}

.snapback-tool__last {
  margin: 0;
  font-size: clamp(0.78rem, 1.8vw, 0.9rem);
  color: rgba(180, 192, 255, 0.7);
}

.snapback-tool__button {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  padding: clamp(0.6rem, 1.8vw, 0.85rem) clamp(1.4rem, 3.4vw, 2rem);
  border-radius: 999px;
  border: 1px solid rgba(160, 176, 255, 0.6);
  background: radial-gradient(circle at top, rgba(140, 152, 255, 0.9) 0%, rgba(82, 96, 220, 0.9) 70%);
  color: #f8f9ff;
  font-family: var(--font-display);
  font-size: clamp(0.9rem, 2.2vw, 1rem);
  letter-spacing: 0.08em;
  text-transform: uppercase;
  font-weight: 600;
  cursor: pointer;
  transition: transform 0.18s ease, box-shadow 0.18s ease, filter 0.18s ease;
}

.snapback-tool__button:hover,
.snapback-tool__button:focus-visible {
  transform: translateY(-1px);
  box-shadow: 0 18px 38px rgba(30, 40, 140, 0.35);
  filter: brightness(1.05);
}

.snapback-tool__button:focus-visible {
  outline: 2px solid rgba(172, 192, 255, 0.9);
  outline-offset: 2px;
}

.snapback-overlay {
  position: fixed;
  inset: 0;
  background: linear-gradient(160deg, rgba(6, 10, 26, 0.78) 0%, rgba(12, 16, 38, 0.78) 50%, rgba(18, 24, 52, 0.78) 100%);
  display: flex;
  align-items: center;
  justify-content: center;
  padding: clamp(1.2rem, 4vw, 2rem);
  z-index: 140;
}

.snapback-panel {
  width: min(480px, 100%);
  display: flex;
  flex-direction: column;
  gap: clamp(0.5rem, 1.6vw, 0.8rem);
  padding: clamp(0.8rem, 2.4vw, 1.2rem);
  border-radius: clamp(16px, 3.6vw, 22px);
  border: 1px solid rgba(138, 156, 255, 0.32);
  background:
    linear-gradient(160deg, rgba(42, 52, 116, 0.92) 0%, rgba(22, 30, 82, 0.94) 55%, rgba(16, 22, 60, 0.96) 100%),
    rgba(14, 18, 48, 0.92);
  box-shadow:
    0 36px 72px -32px rgba(2, 6, 32, 0.82),
    inset 0 1px 0 rgba(255, 255, 255, 0.08);
  backdrop-filter: blur(26px);
  outline: none;
}

.snapback-panel__header {
  display: flex;
  align-items: flex-start;
  justify-content: space-between;
  gap: clamp(0.6rem, 1.6vw, 1rem);
}

.snapback-panel__heading {
  display: flex;
  flex-direction: column;
  gap: clamp(0.2rem, 0.9vw, 0.35rem);
}

.snapback-panel__close {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  width: clamp(2rem, 4vw, 2.2rem);
  height: clamp(2rem, 4vw, 2.2rem);
  border-radius: 999px;
  border: 1px solid rgba(156, 176, 255, 0.36);
  background: rgba(68, 84, 168, 0.25);
  color: rgba(214, 222, 255, 0.82);
  font-size: 1.2rem;
  line-height: 1;
  cursor: pointer;
  transition: transform 0.18s ease, border-color 0.2s ease, background 0.2s ease, color 0.2s ease;
}

.snapback-panel__close:hover,
.snapback-panel__close:focus-visible {
  border-color: rgba(188, 202, 255, 0.5);
  background: rgba(86, 104, 198, 0.32);
  color: rgba(255, 255, 255, 0.92);
  transform: translateY(-1px);
}

.snapback-panel__close:focus-visible {
  outline: 2px solid rgba(170, 190, 255, 0.65);
  outline-offset: 2px;
}

.snapback-panel__title {
  margin: 0;
  font-family: var(--font-display);
  font-size: clamp(1.1rem, 2.4vw, 1.4rem);
  font-weight: 600;
  letter-spacing: 0.015em;
  color: rgba(236, 240, 255, 0.96);
}

.snapback-panel__lead {
  margin: 0;
  font-size: clamp(0.76rem, 1.6vw, 0.9rem);
  color: rgba(198, 208, 255, 0.76);
}

.snapback-panel__context {
  display: flex;
  flex-direction: column;
  gap: clamp(0.12rem, 0.9vw, 0.28rem);
  padding: clamp(0.45rem, 1.3vw, 0.65rem) clamp(0.7rem, 1.8vw, 0.95rem);
  border-radius: clamp(10px, 2vw, 14px);
  background: rgba(40, 50, 118, 0.46);
  border: 1px solid rgba(128, 150, 240, 0.28);
}

.snapback-panel__context-label {
  font-size: clamp(0.62rem, 1.4vw, 0.72rem);
  letter-spacing: 0.1em;
  text-transform: uppercase;
  color: rgba(188, 198, 255, 0.64);
}

.snapback-panel__context-task {
  font-family: var(--font-display);
  font-size: clamp(0.8rem, 2vw, 0.95rem);
  font-weight: 600;
  color: rgba(226, 232, 255, 0.86);
}

.snapback-panel__context-meta {
  font-size: clamp(0.66rem, 1.4vw, 0.78rem);
  color: rgba(174, 188, 255, 0.64);
}

.snapback-panel__content {
  display: flex;
  flex-direction: column;
  gap: clamp(0.6rem, 1.6vw, 0.9rem);
}

.snapback-panel__grid {
  display: grid;
  gap: clamp(0.5rem, 1.4vw, 0.8rem);
  grid-template-columns: minmax(0, 1fr);
}

.snapback-panel__section {
  display: flex;
  flex-direction: column;
  gap: clamp(0.45rem, 1.4vw, 0.7rem);
  padding: clamp(0.5rem, 1.4vw, 0.75rem);
  border-radius: clamp(12px, 2.2vw, 14px);
  border: 1px solid rgba(128, 148, 240, 0.28);
  background: rgba(32, 40, 96, 0.46);
  box-shadow: inset 0 1px 0 rgba(255, 255, 255, 0.05);
}

.snapback-panel__section--stretch { min-height: 100%; }
.snapback-panel__section--compact { gap: clamp(0.5rem, 1.4vw, 0.75rem); }

.snapback-panel__heading {
  margin: 0;
  font-size: clamp(0.88rem, 2vw, 1rem);
  font-weight: 600;
  color: rgba(210, 220, 255, 0.9);
}

.snapback-panel__chips {
  display: flex;
  flex-wrap: wrap;
  gap: clamp(0.35rem, 1.4vw, 0.6rem);
}

.snapback-option {
  padding: 0.4rem 0.8rem;
  border-radius: 999px;
  border: 1px solid rgba(150, 170, 255, 0.38);
  background: rgba(60, 72, 156, 0.38);
  color: rgba(220, 228, 255, 0.88);
  font-size: clamp(0.78rem, 1.6vw, 0.9rem);
  cursor: pointer;
  backdrop-filter: blur(12px);
  transition: border-color 0.2s ease, background 0.2s ease, transform 0.2s ease, box-shadow 0.2s ease;
}

.snapback-option:hover,
.snapback-option:focus-visible {
  border-color: rgba(186, 202, 255, 0.55);
  background: rgba(92, 108, 198, 0.54);
  transform: translateY(-1px);
  box-shadow: 0 10px 22px rgba(18, 24, 70, 0.28);
}

.snapback-option:focus-visible { outline: 2px solid rgba(172, 186, 255, 0.7); outline-offset: 2px; }
.snapback-option--active { border-color: rgba(198, 210, 255, 0.85); background: linear-gradient(135deg, rgba(112, 130, 246, 0.92) 0%, rgba(86, 108, 230, 0.96) 100%); color: #ffffff; box-shadow: 0 12px 24px rgba(26, 34, 96, 0.4); }

.snapback-option-input {
  padding: 0.4rem 0.8rem;
  border-radius: 999px;
  border: 1px solid rgba(150, 170, 255, 0.38);
  background: rgba(60, 72, 156, 0.24);
  color: rgba(220, 228, 255, 0.92);
  font-size: clamp(0.78rem, 1.6vw, 0.9rem);
  outline: none;
  min-width: 12ch;
  pointer-events: auto;
}
.snapback-option-input::placeholder { color: rgba(176, 190, 255, 0.6); }
.snapback-option-input:focus,
.snapback-option-input:focus-visible { border-color: rgba(186, 202, 255, 0.65); background: rgba(92, 108, 198, 0.42); box-shadow: 0 0 0 2px rgba(132, 150, 255, 0.42); }
.snapback-option-input.is-active { border-color: rgba(198, 210, 255, 0.85); background: linear-gradient(135deg, rgba(112, 130, 246, 0.25) 0%, rgba(86, 108, 230, 0.25) 100%); }

/* Light theme for inline chip input */
html[data-theme='light'] .snapback-option-input { border-color: rgba(130, 146, 230, 0.42); background: rgba(230, 236, 255, 0.86); color: rgba(42, 56, 112, 0.9); }
html[data-theme='light'] .snapback-option-input::placeholder { color: rgba(92, 108, 168, 0.65); }
html[data-theme='light'] .snapback-option-input:focus,
html[data-theme='light'] .snapback-option-input:focus-visible { border-color: rgba(138, 154, 242, 0.7); background: rgba(220, 232, 255, 0.9); box-shadow: 0 0 0 2px rgba(138, 154, 242, 0.35); }
html[data-theme='light'] .snapback-option-input.is-active { background: linear-gradient(135deg, rgba(158, 172, 248, 0.3) 0%, rgba(130, 148, 238, 0.3) 100%); border-color: rgba(150, 168, 246, 0.9); }

.snapback-panel__label { display: flex; flex-direction: column; gap: clamp(0.4rem, 1.2vw, 0.55rem); }
.snapback-panel__label-text { font-size: clamp(0.78rem, 1.6vw, 0.88rem); color: rgba(186, 198, 255, 0.8); }
.snapback-panel__optional { font-size: 0.75em; letter-spacing: 0.08em; text-transform: uppercase; color: rgba(198, 206, 255, 0.6); }

.snapback-panel__textarea {
  width: 100%;
  min-height: clamp(64px, 14vw, 90px);
  resize: vertical;
  border-radius: clamp(12px, 2vw, 16px);
  border: 1px solid rgba(138, 158, 255, 0.32);
  background: rgba(24, 30, 72, 0.6);
  color: rgba(236, 240, 255, 0.94);
  padding: clamp(0.5rem, 1.6vw, 0.7rem);
  font-size: clamp(0.82rem, 1.6vw, 0.92rem);
  line-height: 1.5;
  transition: border-color 0.18s ease, box-shadow 0.18s ease;
}
.snapback-panel__textarea::placeholder { color: rgba(176, 190, 255, 0.55); }
.snapback-panel__textarea:focus { outline: none; border-color: rgba(194, 210, 255, 0.72); box-shadow: 0 0 0 2px rgba(132, 150, 255, 0.34); }

.snapback-panel__actions { display: flex; justify-content: flex-end; gap: clamp(0.6rem, 2vw, 1rem); }
.snapback-panel__button { padding: 0.5rem 1.1rem; border-radius: 999px; border: 1px solid transparent; font-size: clamp(0.82rem, 1.8vw, 0.92rem); font-weight: 600; letter-spacing: 0.05em; text-transform: uppercase; cursor: pointer; transition: transform 0.18s ease, box-shadow 0.18s ease, border-color 0.18s ease, background 0.18s ease; }
.snapback-panel__button--ghost { background: transparent; border-color: rgba(152, 168, 255, 0.4); color: rgba(214, 220, 255, 0.82); }
.snapback-panel__button--ghost:hover, .snapback-panel__button--ghost:focus-visible { border-color: rgba(182, 198, 255, 0.65); background: rgba(46, 54, 112, 0.65); }
.snapback-panel__button--primary { background: linear-gradient(135deg, rgba(122, 140, 255, 0.96) 0%, rgba(86, 104, 230, 0.96) 90%); color: #f7f8ff; border-color: rgba(168, 184, 255, 0.85); box-shadow: 0 18px 34px rgba(48, 60, 156, 0.42); }
.snapback-panel__button--primary:hover, .snapback-panel__button--primary:focus-visible { transform: translateY(-1px); box-shadow: 0 24px 46px rgba(54, 68, 168, 0.48); }
.snapback-panel__button:focus-visible { outline: 2px solid rgba(180, 196, 255, 0.85); outline-offset: 2px; }

/* Responsive tweaks */
@media (max-width: 580px) {
  .snapback-tool__card { flex-direction: column; align-items: stretch; text-align: center; gap: clamp(0.7rem, 2.6vw, 1rem); }
  .snapback-tool__body { max-width: 100%; align-items: center; }
  .snapback-tool__text { text-align: center; }
  .snapback-tool__button { width: 100%; }
}

/* Light theme */
html[data-theme='light'] .snapback-tool__card { border-color: rgba(118, 138, 232, 0.4); background: linear-gradient(155deg, rgba(247, 249, 255, 0.98) 0%, rgba(232, 238, 255, 0.97) 60%, rgba(220, 230, 255, 0.96) 100%); box-shadow: 0 24px 48px -28px rgba(118, 130, 206, 0.35), inset 0 0 0 1px rgba(255, 255, 255, 0.5); }
html[data-theme='light'] .snapback-tool__title { color: rgba(36, 44, 102, 0.92); }
html[data-theme='light'] .snapback-tool__text { color: rgba(66, 78, 132, 0.72); }
html[data-theme='light'] .snapback-tool__last { color: rgba(76, 88, 146, 0.68); }
html[data-theme='light'] .snapback-tool__button { border-color: rgba(120, 138, 232, 0.52); background: radial-gradient(circle at top, rgba(96, 112, 236, 0.96) 0%, rgba(82, 102, 226, 0.94) 70%); }
html[data-theme='light'] .snapback-overlay { background: linear-gradient(160deg, rgba(22, 30, 52, 0.42) 0%, rgba(20, 28, 48, 0.42) 100%); }
html[data-theme='light'] .snapback-panel { border-color: rgba(130, 150, 232, 0.38); background: linear-gradient(160deg, rgba(255, 255, 255, 0.99) 0%, rgba(240, 246, 255, 0.98) 60%, rgba(228, 236, 255, 0.97) 100%); box-shadow: 0 42px 82px -28px rgba(122, 138, 206, 0.38), inset 0 1px 0 rgba(255, 255, 255, 0.7); }
html[data-theme='light'] .snapback-panel__close { border-color: rgba(142, 158, 232, 0.4); background: rgba(214, 220, 255, 0.72); color: rgba(54, 64, 128, 0.8); }
html[data-theme='light'] .snapback-panel__title { color: rgba(34, 44, 102, 0.9); }
html[data-theme='light'] .snapback-panel__lead { color: rgba(70, 82, 140, 0.7); }
html[data-theme='light'] .snapback-panel__context { background: rgba(240, 244, 255, 0.86); border-color: rgba(140, 156, 230, 0.34); }
html[data-theme='light'] .snapback-panel__context-label { color: rgba(94, 108, 168, 0.66); }
html[data-theme='light'] .snapback-panel__context-task { color: rgba(40, 52, 110, 0.86); }
html[data-theme='light'] .snapback-panel__context-meta { color: rgba(82, 96, 150, 0.66); }
html[data-theme='light'] .snapback-panel__heading { color: rgba(42, 56, 122, 0.82); }
html[data-theme='light'] .snapback-panel__section { border-color: rgba(132, 148, 230, 0.35); background: rgba(241, 245, 255, 0.9); box-shadow: inset 0 1px 0 rgba(255, 255, 255, 0.86); }
html[data-theme='light'] .snapback-option { border-color: rgba(130, 146, 230, 0.42); background: rgba(230, 236, 255, 0.82); color: rgba(46, 56, 126, 0.78); }
html[data-theme='light'] .snapback-option--active { background: linear-gradient(135deg, rgba(138, 154, 242, 0.94) 0%, rgba(108, 128, 232, 0.96) 100%); border-color: rgba(152, 170, 242, 0.82); color: #ffffff; }
html[data-theme='light'] .snapback-panel__label-text { color: rgba(76, 88, 146, 0.7); }
html[data-theme='light'] .snapback-panel__optional { color: rgba(94, 108, 160, 0.5); }
html[data-theme='light'] .snapback-panel__textarea { border-color: rgba(128, 144, 228, 0.4); background: rgba(244, 247, 255, 0.95); color: rgba(32, 42, 92, 0.9); }
html[data-theme='light'] .snapback-panel__textarea::placeholder { color: rgba(110, 124, 178, 0.58); }
html[data-theme='light'] .snapback-panel__button--ghost { border-color: rgba(120, 134, 214, 0.45); color: rgba(42, 56, 112, 0.82); }
html[data-theme='light'] .snapback-panel__button--ghost:hover, html[data-theme='light'] .snapback-panel__button--ghost:focus-visible { background: rgba(214, 222, 255, 0.7); }
html[data-theme='light'] .snapback-panel__button--primary { background: linear-gradient(135deg, rgba(120, 134, 230, 0.98) 0%, rgba(86, 106, 224, 0.95) 90%); border-color: rgba(134, 150, 230, 0.82); }
